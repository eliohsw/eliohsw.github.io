<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script>
    (function() {
      try {
        document.documentElement.classList.add('fonts-loading');
      } catch (e) {}
    })();
  </script>

  <!-- Font preloads -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap">

  <!-- Icon preloads -->
  <link rel="preload" href="{{ site.baseurl }}/src/assets/icons/favicon-144x144.png" as="image" type="image/png" fetchpriority="high">
  <link rel="preload" href="{{ site.baseurl }}/src/assets/icons/favicon-32x32.png" as="image" type="image/png">
  <link rel="preload" href="{{ site.baseurl }}/src/assets/icons/favicon-16x16.png" as="image" type="image/png">

  <script>
    (function() {
      try {
        var root = document.documentElement;
        var reveal = function() {
          root.classList.remove('fonts-loading');
          root.classList.add('fonts-ready');
        };
        if (document.fonts && document.fonts.load && window.Promise) {
          Promise.all([
            document.fonts.load('1em "Inter"'),
            document.fonts.load('600 1em "Inter"')
          ]).then(reveal, reveal);
          setTimeout(reveal, 2000);
        } else {
          reveal();
        }
      } catch (e) {}
    })();
  </script>

  <!-- Stylesheets -->
  <style>
    .ionicon {
      display: inline-block;
      width: 1em;
      height: 1em;
      fill: currentColor;
      stroke: currentColor;
      vertical-align: middle;
    }

    .ionicon-fill-none {
      fill: none;
    }

    .ionicon-stroke-width {
      stroke-width: 32px;
      stroke-width: var(--ionicon-stroke-width, 32px);
    }

    .fonts-loading #greeting {
      visibility: hidden;
    }

    .fonts-ready #greeting {
      visibility: visible;
    }
  </style>
  <link rel="preload" href="{{ site.baseurl }}/src/assets/fonts/Satoshi-Variable.ttf" as="font" type="font/ttf" crossorigin>
  <link rel="preload" href="{{ site.baseurl }}/src/assets/fonts/Satoshi-VariableItalic.ttf" as="font" type="font/ttf" crossorigin>
  <link rel="preload" href="{{ site.baseurl }}/src/assets/fonts/GeneralSans-Variable.ttf" as="font" type="font/ttf" crossorigin>
  <link rel="preload" href="{{ site.baseurl }}/src/assets/fonts/GeneralSans-VariableItalic.ttf" as="font" type="font/ttf" crossorigin>
  <link rel="stylesheet" href="{{ site.baseurl }}/{{ page.css_path | default: 'src/css/main.css' }}?v=20260126">
  {% if page.include_tikz %}
  <link rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css">
  {% endif %}

  <!-- Scripts -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        tags: 'ams',
        processEnvironments: true,
        packages: { '[+]': ['ams', 'newcommand', 'noerrors', 'noundefined'] }
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
        enableMenu: false
      },
      svg: {
        fontCache: 'global'
      }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  {% if page.include_tikz %}
  <script src="https://tikzjax.com/v1/tikzjax.js"></script>
  {% endif %}
  <script type="module" src="{{ site.baseurl }}/{{ page.js_main_path | default: 'src/js/main.js' }}"></script>

  <!-- Theme initialization script -->
  <script>
    (function() {
      try {
        var theme = localStorage.getItem('theme');
        if (theme) {
          document.documentElement.setAttribute('data-theme', theme);
        } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
          document.documentElement.setAttribute('data-theme', 'dark');
        } else {
          document.documentElement.setAttribute('data-theme', 'light');
        }
      } catch (e) {}
    })();
  </script>

  {% assign show_future = site.future | default: false %}
  {% assign now_ts = site.time | date: "%s" | plus: 0 %}
  {% assign visible_blogs = '' | split: '' %}
  {% for blog in site.blog %}
    {% assign publish_date = blog.date_publish | default: blog.date %}
    {% assign publish_ts = publish_date | date: "%s" | plus: 0 %}
    {% if blog.hidden != true %}
      {% if show_future or publish_ts <= now_ts %}
        {% assign visible_blogs = visible_blogs | push: blog %}
      {% endif %}
    {% endif %}
  {% endfor %}
  {% assign visible_projects = '' | split: '' %}
  {% for project in site.projects %}
    {% assign publish_date = project.date_publish | default: project.date %}
    {% assign publish_ts = publish_date | date: "%s" | plus: 0 %}
    {% if project.hidden != true %}
      {% if show_future or publish_ts <= now_ts %}
        {% assign visible_projects = visible_projects | push: project %}
      {% endif %}
    {% endif %}
  {% endfor %}

  {% assign meta_source = page %}
  {% if redirect_target == nil %}
    {% if page.redirect_to %}
      {% assign redirect_target = page.redirect_to %}
      {% if redirect_target.first %}
        {% assign redirect_target = redirect_target.first %}
      {% endif %}
    {% endif %}
  {% endif %}
  {% if redirect_target == nil or redirect_target == "" %}
    {% assign redirect_from_path = page.url %}
    {% assign candidate = site.pages | where_exp: "p", "p.redirect_from contains redirect_from_path" | first %}
    {% if candidate == nil %}
      {% assign candidate = visible_blogs | where_exp: "p", "p.redirect_from contains redirect_from_path" | first %}
    {% endif %}
    {% if candidate == nil %}
      {% assign candidate = visible_projects | where_exp: "p", "p.redirect_from contains redirect_from_path" | first %}
    {% endif %}
    {% if candidate %}
      {% assign meta_source = candidate %}
      {% assign redirect_target = candidate.url %}
    {% endif %}
  {% endif %}
  {% if redirect_target != nil and redirect_target != "" %}
    {% assign redirect_path = redirect_target | replace: site.url, "" | replace: site.baseurl, "" %}
    {% assign redirect_path = redirect_path | split: "?" | first | split: "#" | first %}
    {% assign candidate = site.pages | where: "url", redirect_path | first %}
    {% if candidate == nil %}
      {% assign candidate = visible_blogs | where: "url", redirect_path | first %}
    {% endif %}
    {% if candidate == nil %}
      {% assign candidate = visible_projects | where: "url", redirect_path | first %}
    {% endif %}
    {% if candidate %}
      {% assign meta_source = candidate %}
    {% endif %}
  {% endif %}

  {% assign meta_title = meta_source.og_title | default: meta_source.title | default: site.title | default: "Elio Huang" %}
  {% assign meta_description = meta_source.description | strip_html | strip_newlines | strip %}
  {% if meta_description == "" %}
    {% assign content_parts = meta_source.content | split: '<p>' %}
    {% if content_parts.size > 1 %}
      {% assign first_paragraph = content_parts[1] | split: '</p>' | first %}
      {% assign first_paragraph = first_paragraph | strip_html | strip_newlines | strip %}
      {% if first_paragraph != "" %}
        {% assign meta_description = first_paragraph %}
      {% endif %}
    {% endif %}
  {% endif %}
  {% if meta_description == "" %}
    {% capture meta_description %}
      {{ meta_source.excerpt | default: meta_source.subtitle | default: site.description }}
    {% endcapture %}
    {% assign meta_description = meta_description | strip_html | strip_newlines | strip %}
  {% endif %}
  {% assign meta_image = meta_source.og_image | default: meta_source.image | default: site.social_image %}
  {% assign meta_url = meta_source.url | absolute_url %}
  {% assign meta_type = meta_source.og_type | default: "website" %}

  <title>{{ meta_title }}</title>
  {% if meta_description != "" %}
  <meta name="description" content="{{ meta_description }}">
  {% endif %}

  <!-- Open Graph / Twitter cards -->
  <meta property="og:title" content="{{ meta_title }}">
  {% if meta_description != "" %}
  <meta property="og:description" content="{{ meta_description }}">
  {% endif %}
  <meta property="og:url" content="{{ meta_url }}">
  <meta property="og:type" content="{{ meta_type }}">
  {% if site.title %}
  <meta property="og:site_name" content="{{ site.title }}">
  {% endif %}
  {% if meta_image %}
  <meta property="og:image" content="{{ meta_image | absolute_url }}">
  {% endif %}
  {% if meta_image %}
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="{{ meta_image | absolute_url }}">
  {% else %}
  <meta name="twitter:card" content="summary">
  {% endif %}
  <meta name="twitter:title" content="{{ meta_title }}">
  {% if meta_description != "" %}
  <meta name="twitter:description" content="{{ meta_description }}">
  {% endif %}

  {% if redirect_target != nil and redirect_target != "" %}
  <meta http-equiv="refresh" content="0; url={{ redirect_target | absolute_url }}">
  <link rel="canonical" href="{{ redirect_target | absolute_url }}">
  <script>
    window.location.replace("{{ redirect_target | absolute_url }}");
  </script>
  {% endif %}

  <link rel="apple-touch-icon" sizes="180x180" href="{{ site.baseurl }}/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ site.baseurl }}/src/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ site.baseurl }}/src/assets/icons/favicon-16x16.png">
  <link rel="icon" href="{{ site.baseurl }}/{{ page.favicon_path | default: 'src/assets/icons/favicon-144x144.png' }}">
  <link rel="mask-icon" href="{{ site.baseurl }}/{{ page.favicon_path | default: 'src/assets/icons/favicon-144x144.png' }}" color="#000000">
</head>
